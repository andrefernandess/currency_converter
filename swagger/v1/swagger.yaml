---
openapi: 3.0.1
info:
  title: Currency Converter API
  version: v1
  description: API REST para conversão de moedas em tempo real
  contact:
    name: Andre
    email: andre.l.fernandess@hotmail.com
servers:
  - url: https://currency-converter-api-zay7.onrender.com
    description: Servidor de Produção (Render)
  - url: http://localhost:3000
    description: Servidor de Desenvolvimento (Local)
paths:
  "/api/v1/convert":
    post:
      summary: Converter moeda
      tags:
      - Conversões
      description: Realiza a conversão entre duas moedas utilizando taxas em tempo
        real
      parameters: []
      responses:
        '201':
          description: Conversão realizada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  transaction_id:
                    type: integer
                    example: 42
                  user_id:
                    type: integer
                    example: 123
                  from_currency:
                    type: string
                    example: USD
                  to_currency:
                    type: string
                    example: BRL
                  from_value:
                    type: number
                    example: 100.0
                  to_value:
                    type: number
                    example: 525.32
                  rate:
                    type: number
                    example: 5.2532
                  timestamp:
                    type: string
                    example: '2024-05-19T18:00:00Z'
        '422':
          description: Valor inválido
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Amount must be greater than zero
        '400':
          description: Parâmetro ausente
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: 'Missing required parameter: conversion'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                conversion:
                  type: object
                  properties:
                    user_id:
                      type: integer
                      example: 123
                      description: ID do usuário
                    from_currency:
                      type: string
                      example: USD
                      description: Moeda de origem (USD, BRL, EUR, JPY)
                    to_currency:
                      type: string
                      example: BRL
                      description: Moeda de destino (USD, BRL, EUR, JPY)
                    amount:
                      type: number
                      example: 100.0
                      description: Valor a ser convertido
                  required:
                  - user_id
                  - from_currency
                  - to_currency
                  - amount
  "/api/v1/transactions":
    get:
      summary: Listar transações do usuário
      tags:
      - Transações
      description: Lista todas as conversões realizadas por um usuário, ordenadas
        da mais recente para a mais antiga
      parameters:
      - name: user_id
        in: query
        required: true
        description: ID do usuário
        example: 123
        schema:
          type: integer
      responses:
        '200':
          description: Lista vazia (usuário sem transações)
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    transaction_id:
                      type: integer
                      example: 42
                    user_id:
                      type: integer
                      example: 123
                    from_currency:
                      type: string
                      example: USD
                    to_currency:
                      type: string
                      example: BRL
                    from_value:
                      type: number
                      example: 100.0
                    to_value:
                      type: number
                      example: 525.32
                    rate:
                      type: number
                      example: 5.2532
                    timestamp:
                      type: string
                      example: '2024-05-19T18:00:00Z'
        '422':
          description: user_id ausente
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: user_id parameter is required
servers:
- url: http://localhost:3000
  description: Development server
